<mat-tab-group class="px-2 py-4" color="accent" dynamicHeight="true">
    <mat-tab>
        <ng-template matTabLabel>
            <mat-icon>assignment_late_icon</mat-icon>
            <span class="ps-2 pe-2">{{'invoices.uncollected_invoices' | translate}}</span>
            <span>({{uncollectedInvoices.lineItems?.length}})</span>
        </ng-template>
        <div class="row px-2 py-2">
            <div class="col-6">
                <mat-form-field>
                    <mat-label>{{ 'invoices.select_time_period' | translate }}</mat-label>
                    <mat-select [value]="'currentMonth'" (selectionChange)="getUnpaidInvoices($event.value)">
                        <mat-option value="currentMonth">{{ 'invoices.this_month' | translate }}</mat-option>
                        <mat-option value="all">{{ 'invoices.all_time' | translate }}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-6 py-2 d-flex justify-content-end">
                <button mat-raised-button printSectionId="print-section-uncollected" [useExistingCss]="true" ngxPrint>
                    <mat-icon color="accent">print</mat-icon> {{ 'invoices.print' | translate }}
                </button>
            </div>
        </div>

        <div class="d-none">
            <div class="row px-2 py-2" id="print-section-uncollected">
                <div class="col-12" *ngIf="uncollectedInvoices?.lineItems?.length">
                    <ngx-table [configuration]="tableConfig" [columns]="uncollectedInvoicesCols"
                        [data]="uncollectedInvoices.lineItems!"></ngx-table>
                </div>
            </div>
        </div>

        <div class="row px-2 py-2" [@scheduleAnim]="uncollectedInvoices.lineItems?.length">
            <div class="col-12" *ngIf="uncollectedInvoices?.lineItems?.length">
                <invoice-list [canEditInvoices]="true" [invoices]="uncollectedInvoices.lineItems!">
                </invoice-list>
            </div>
        </div>
    </mat-tab>

    <mat-tab>
        <ng-template matTabLabel>
            <mat-icon>assignment_turned_in_icon</mat-icon>
            <span class="ps-2 pe-2">{{'invoices.collected_invoices' | translate}}</span>
            <span>({{collectedInvoices.lineItems?.length}})</span>
        </ng-template>
        <div class="row px-2 py-2">
            <div class="col-6">
                <mat-form-field>
                    <mat-label>{{ 'invoices.select_month' | translate }}</mat-label>
                    <input readonly matInput [matDatepicker]="dp" [value]="currentDate" (click)="dp.open()">
                    <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                    <mat-datepicker #dp startView="multi-year" (monthSelected)="monthAndYearSelected($event, dp);"
                        panelClass="example-month-picker">
                    </mat-datepicker>
                </mat-form-field>
            </div>
            <div class="col-6 py-2 d-flex justify-content-end">
                <button mat-raised-button printSectionId="print-section-collected" [useExistingCss]="true" ngxPrint>
                    <mat-icon color="accent">print</mat-icon> {{ 'invoices.print' | translate }}
                </button>
            </div>
        </div>
        <div class="d-none">
            <div class="row px-2 py-2" id="print-section-collected">
                <div class="col-12" *ngIf="collectedInvoices?.lineItems?.length">
                    <ngx-table [configuration]="tableConfig" [columns]="collectedInvoicesCols"
                        [data]="collectedInvoices.lineItems!"></ngx-table>
                </div>
            </div>
        </div>
        <div class="row px-2 py-2" [@scheduleAnim]="uncollectedInvoices.lineItems?.length">
            <div class="col-12" *ngIf="uncollectedInvoices?.lineItems?.length">
                <invoice-list [canEditInvoices]="false" [invoices]="collectedInvoices.lineItems!">
                </invoice-list>
            </div>
        </div>
    </mat-tab>
</mat-tab-group>

<ng-template #paymentDateTpl let-row>
    {{ row.paymentDate?.toDate() | date: 'dd/MM/yyyy' }}
</ng-template>

<ng-template #beginDateTpl let-row>
    {{ row.beginDate?.toDate() | date: 'dd/MM/yyyy' }}
</ng-template>